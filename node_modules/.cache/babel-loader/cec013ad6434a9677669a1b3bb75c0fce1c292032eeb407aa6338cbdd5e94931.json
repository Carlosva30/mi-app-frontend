{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function PantallaFinal(_ref){let{onLogout}=_ref;const[usuario,setUsuario]=useState(null);const[mensaje,setMensaje]=useState('');useEffect(()=>{const token=localStorage.getItem('token');if(!token){setMensaje('No tienes sesión activa.');return;}axios.get('http://localhost:3001/api/auth/perfil',{headers:{Authorization:`Bearer ${token}`}}).then(res=>{setUsuario(res.data.usuario);}).catch(err=>{console.error(err);setMensaje('Token inválido o expirado. Inicia sesión nuevamente.');});},[]);const cerrarSesion=()=>{localStorage.removeItem('token');if(onLogout)onLogout();// vuelve a pantalla login\n};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'30px',textAlign:'center'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\xA1Gracias por usar nuestra app! \\uD83C\\uDF89\"}),mensaje&&/*#__PURE__*/_jsx(\"p\",{children:mensaje}),usuario?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Nombre:\"}),\" \",usuario.nombre]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Correo:\"}),\" \",usuario.correo]}),/*#__PURE__*/_jsx(\"button\",{onClick:cerrarSesion,children:\"Cerrar sesi\\xF3n\"})]}):!mensaje&&/*#__PURE__*/_jsx(\"p\",{children:\"Cargando informaci\\xF3n del usuario...\"})]});}export default PantallaFinal;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","PantallaFinal","_ref","onLogout","usuario","setUsuario","mensaje","setMensaje","token","localStorage","getItem","get","headers","Authorization","then","res","data","catch","err","console","error","cerrarSesion","removeItem","style","padding","textAlign","children","nombre","correo","onClick"],"sources":["C:/Users/Windows/mi-proyecto-react/mi-app-servicios/src/componentes/inicio/PantallaFinal.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nfunction PantallaFinal({ onLogout }) {\r\n  const [usuario, setUsuario] = useState(null);\r\n  const [mensaje, setMensaje] = useState('');\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('token');\r\n\r\n    if (!token) {\r\n      setMensaje('No tienes sesión activa.');\r\n      return;\r\n    }\r\n\r\n    axios.get('http://localhost:3001/api/auth/perfil', {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`\r\n      }\r\n    })\r\n    .then(res => {\r\n      setUsuario(res.data.usuario);\r\n    })\r\n    .catch(err => {\r\n      console.error(err);\r\n      setMensaje('Token inválido o expirado. Inicia sesión nuevamente.');\r\n    });\r\n  }, []);\r\n\r\n  const cerrarSesion = () => {\r\n    localStorage.removeItem('token');\r\n    if (onLogout) onLogout(); // vuelve a pantalla login\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: '30px', textAlign: 'center' }}>\r\n      <h2>¡Gracias por usar nuestra app! 🎉</h2>\r\n\r\n      {mensaje && <p>{mensaje}</p>}\r\n\r\n      {usuario ? (\r\n        <>\r\n          <p><strong>Nombre:</strong> {usuario.nombre}</p>\r\n          <p><strong>Correo:</strong> {usuario.correo}</p>\r\n          <button onClick={cerrarSesion}>Cerrar sesión</button>\r\n        </>\r\n      ) : !mensaje && (\r\n        <p>Cargando información del usuario...</p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PantallaFinal;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAE1B,QAAS,CAAAC,aAAaA,CAAAC,IAAA,CAAe,IAAd,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACjC,KAAM,CAACE,OAAO,CAAEC,UAAU,CAAC,CAAGZ,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACa,OAAO,CAAEC,UAAU,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CAE1CD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAgB,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAE3C,GAAI,CAACF,KAAK,CAAE,CACVD,UAAU,CAAC,0BAA0B,CAAC,CACtC,OACF,CAEAb,KAAK,CAACiB,GAAG,CAAC,uCAAuC,CAAE,CACjDC,OAAO,CAAE,CACPC,aAAa,CAAE,UAAUL,KAAK,EAChC,CACF,CAAC,CAAC,CACDM,IAAI,CAACC,GAAG,EAAI,CACXV,UAAU,CAACU,GAAG,CAACC,IAAI,CAACZ,OAAO,CAAC,CAC9B,CAAC,CAAC,CACDa,KAAK,CAACC,GAAG,EAAI,CACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC,CAClBX,UAAU,CAAC,sDAAsD,CAAC,CACpE,CAAC,CAAC,CACJ,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAc,YAAY,CAAGA,CAAA,GAAM,CACzBZ,YAAY,CAACa,UAAU,CAAC,OAAO,CAAC,CAChC,GAAInB,QAAQ,CAAEA,QAAQ,CAAC,CAAC,CAAE;AAC5B,CAAC,CAED,mBACEL,KAAA,QAAKyB,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEC,SAAS,CAAE,QAAS,CAAE,CAAAC,QAAA,eACnD9B,IAAA,OAAA8B,QAAA,CAAI,gDAAiC,CAAI,CAAC,CAEzCpB,OAAO,eAAIV,IAAA,MAAA8B,QAAA,CAAIpB,OAAO,CAAI,CAAC,CAE3BF,OAAO,cACNN,KAAA,CAAAE,SAAA,EAAA0B,QAAA,eACE5B,KAAA,MAAA4B,QAAA,eAAG9B,IAAA,WAAA8B,QAAA,CAAQ,SAAO,CAAQ,CAAC,IAAC,CAACtB,OAAO,CAACuB,MAAM,EAAI,CAAC,cAChD7B,KAAA,MAAA4B,QAAA,eAAG9B,IAAA,WAAA8B,QAAA,CAAQ,SAAO,CAAQ,CAAC,IAAC,CAACtB,OAAO,CAACwB,MAAM,EAAI,CAAC,cAChDhC,IAAA,WAAQiC,OAAO,CAAER,YAAa,CAAAK,QAAA,CAAC,kBAAa,CAAQ,CAAC,EACrD,CAAC,CACD,CAACpB,OAAO,eACVV,IAAA,MAAA8B,QAAA,CAAG,wCAAmC,CAAG,CAC1C,EACE,CAAC,CAEV,CAEA,cAAe,CAAAzB,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}